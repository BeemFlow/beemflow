name: fetch_and_summarize
on: cli.manual
vars:
  fetch_url: "https://raw.githubusercontent.com/awantoch/beemflow/refs/heads/main/README.md"
steps:
  - id: fetch_page
    use: http.fetch
    with:
      url: "{{.vars.fetch_url}}"
  - id: summarize
    use: openai.chat_completion
    with:
      model: "gpt-4o"
      messages:
        - role: system
          content: "You are a concise assistant. Summarize the following web page in a simple paragraph."
        - role: user
          content: "{{.fetch_page.body}}"
  - id: print
    use: core.echo
    with:
      text: "Summary: {{(index .summarize.choices 0).message.content}}"